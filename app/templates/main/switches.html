{% extends 'main/menu.html' %}

{% block header %}Switches in {{ecosystem_ids[1]}}{% endblock %}
{% block info %}{% endblock %}

{% block content %}
  {% if current_user.is_operator %}
  <button id="On" title="Turn lights on">On</button>
  <button id="Off" title="Turn lights on">Off</button>
  <button id="Auto" title="Turn lights to automatic mode">Auto</button>

  <script type="text/javascript">
    $(document).ready(function() {
      namespace = "/browser";
      var socket = io(namespace);

      $("button#On").click(function() {
          socket.emit("turn_light_on", {ecosystem: "{{ecosystem_ids[0]|safe}}" });
          return false;
      });
      $("button#Off").click(function() {
          socket.emit("turn_light_off", {ecosystem: "{{ecosystem_ids[0]|safe}}"});
          return false;
      });
      $("button#Auto").click(function() {
          socket.emit("turn_light_auto", {ecosystem: "{{ecosystem_ids[0]|safe}}"});
          return false;
      });
    });
  </script>
  {% else %}
  <button id="On" disabled title="You need to be an operator to turn lights on">On</button>
  <button id="Off" disabled title="You need to be an operator to turn lights off">Off</button>
  <button id="Auto" disabled title="You need to be an operator to turn lights to automatic mode">Auto</button>
  {% endif %}
{% endblock %}